{
  "info": {
    "name": "PFMP API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.3.0",
    "description": "PFMP API endpoints grouped for development and testing. Adjust {{baseUrl}} as needed."
  },
  "item": [
    {
      "name": "Health & Docs",
      "item": [
        { "name": "Health", "request": { "method": "GET", "url": "{{baseUrl}}/health" } },
        { "name": "Health Ready", "request": { "method": "GET", "url": "{{baseUrl}}/health/ready" } },
        { "name": "Swagger JSON", "request": { "method": "GET", "url": "{{baseUrl}}/swagger/v1/swagger.json" } },
        { "name": "List Endpoints (Custom)", "request": { "method": "GET", "url": "{{baseUrl}}/api/docs/endpoints" } }
      ]
    },
    {
      "name": "Auth",
      "item": [
        { "name": "Login", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": { "mode": "raw", "raw": "{\n  \"email\": \"dev.user@pfmp.local\",\n  \"password\": \"Passw0rd!\"\n}" }, "url": "{{baseUrl}}/api/auth/login" } },
        { "name": "Register", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": { "mode": "raw", "raw": "{\n  \"email\": \"dev+{{guid}}@pfmp.local\",\n  \"password\": \"Passw0rd!\",\n  \"firstName\": \"Dev\",\n  \"lastName\": \"User\"\n}" }, "url": "{{baseUrl}}/api/auth/register" } },
        { "name": "Azure Login", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": { "mode": "raw", "raw": "{\n  \"azureToken\": \"fake-token\"\n}" }, "url": "{{baseUrl}}/api/auth/azure-login" } },
        { "name": "Refresh Token", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": { "mode": "raw", "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}" }, "url": "{{baseUrl}}/api/auth/refresh" } },
        { "name": "Logout", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": { "mode": "raw", "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}" }, "url": "{{baseUrl}}/api/auth/logout" } },
        { "name": "Get Me", "request": { "method": "GET", "url": "{{baseUrl}}/api/auth/me" } },
        { "name": "Link Azure", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": { "mode": "raw", "raw": "{\n  \"azureObjectId\": \"00000000-0000-0000-0000-000000000000\"\n}" }, "url": "{{baseUrl}}/api/auth/link-azure" } },
        { "name": "Auth Config", "request": { "method": "GET", "url": "{{baseUrl}}/api/auth/config" } }
      ]
    },
    {
      "name": "Admin Users",
      "item": [
        { "name": "List Users", "request": { "method": "GET", "url": "{{baseUrl}}/api/admin/users" } },
        { "name": "Create User", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": { "mode": "raw", "raw": "{\n  \"firstName\": \"Jane\",\n  \"lastName\": \"Doe\",\n  \"email\": \"jane+{{guid}}@local\",\n  \"emergencyFundTarget\": 0\n}" }, "url": "{{baseUrl}}/api/admin/users" } },
        { "name": "Create Test User (fresh)", "request": { "method": "POST", "url": "{{baseUrl}}/api/admin/users/test?scenario=fresh" } },
        { "name": "Create Test User (mid)", "request": { "method": "POST", "url": "{{baseUrl}}/api/admin/users/test?scenario=mid" } },
        { "name": "Create Test User (done)", "request": { "method": "POST", "url": "{{baseUrl}}/api/admin/users/test?scenario=done" } },
        { "name": "Reset Onboarding Progress", "request": { "method": "POST", "url": "{{baseUrl}}/api/admin/users/{{userId}}/onboarding/reset" } },
        { "name": "Delete User", "request": { "method": "DELETE", "url": "{{baseUrl}}/api/admin/users/{{userId}}" } }
      ]
    },
    {
      "name": "Scheduler Admin",
      "description": "Hangfire scheduled job management endpoints (Wave 10)",
      "item": [
        { "name": "Get Recurring Jobs", "request": { "method": "GET", "url": "{{baseUrl}}/api/admin/scheduler/jobs" } },
        { "name": "Get Queue Stats", "request": { "method": "GET", "url": "{{baseUrl}}/api/admin/scheduler/queues" } },
        { "name": "Get Job History", "request": { "method": "GET", "url": "{{baseUrl}}/api/admin/scheduler/history?limit=20" } },
        { "name": "Trigger Job by ID", "request": { "method": "POST", "url": "{{baseUrl}}/api/admin/scheduler/jobs/daily-tsp-refresh/trigger" } },
        { "name": "Trigger Price Refresh", "request": { "method": "POST", "url": "{{baseUrl}}/api/admin/scheduler/trigger/price-refresh" } },
        { "name": "Trigger Net Worth Snapshot", "request": { "method": "POST", "url": "{{baseUrl}}/api/admin/scheduler/trigger/networth-snapshot" } },
        { "name": "Trigger TSP Refresh", "request": { "method": "POST", "url": "{{baseUrl}}/api/admin/scheduler/trigger/tsp-refresh" } },
        { "name": "Update Job Schedule", "request": { "method": "PUT", "header": [{"key":"Content-Type","value":"application/json"}], "body": { "mode": "raw", "raw": "{\n  \"cronExpression\": \"0 22 * * *\"\n}" }, "url": "{{baseUrl}}/api/admin/scheduler/jobs/daily-tsp-refresh/schedule" } }
      ]
    },
    {
      "name": "Dev Users",
      "item": [
        { "name": "List Dev Users", "request": { "method": "GET", "url": "{{baseUrl}}/api/dev/users" } },
        { "name": "Set Default Dev User", "request": { "method": "POST", "url": "{{baseUrl}}/api/dev/users/default/{{userId}}" } }
      ]
    },
    {
      "name": "Onboarding Progress",
      "item": [
        { "name": "Get Progress", "request": { "method": "GET", "url": "{{baseUrl}}/api/onboarding/progress?userId={{userId}}" } },
        { "name": "Put Snapshot", "request": { "method": "PUT", "header": [{"key":"Content-Type","value":"application/json"}], "body": { "mode": "raw", "raw": "{\n  \"currentStepId\": \"welcome\",\n  \"completedStepIds\": [\"welcome\"],\n  \"stepPayloads\": { \n    \"welcome\": { \"acknowledged\": true }\n  }\n}" }, "url": "{{baseUrl}}/api/onboarding/progress?userId={{userId}}" } },
        { "name": "Patch Step", "request": { "method": "PATCH", "header": [{"key":"Content-Type","value":"application/json"}], "body": { "mode": "raw", "raw": "{\n  \"data\": { \"nickname\": \"Tester\" },\n  \"completed\": true\n}" }, "url": "{{baseUrl}}/api/onboarding/progress/step/profile?userId={{userId}}" } },
        { "name": "Reset Progress", "request": { "method": "POST", "url": "{{baseUrl}}/api/onboarding/progress/reset?userId={{userId}}" } }
      ]
    },
    {
      "name": "Financial Profile",
      "item": [
        { "name": "Get Snapshot", "request": { "method": "GET", "url": "{{baseUrl}}/api/financial-profile/{{userId}}/snapshot" } },
        { "name": "Section Statuses", "request": { "method": "GET", "url": "{{baseUrl}}/api/financial-profile/{{userId}}/sections" } },
        { "name": "Household: Upsert", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": { "mode": "raw", "raw": "{\n  \"preferredName\": \"Pat\",\n  \"maritalStatus\": \"single\",\n  \"dependentCount\": 0\n}" }, "url": "{{baseUrl}}/api/financial-profile/{{userId}}/household" } },
        { "name": "Household: Get", "request": { "method": "GET", "url": "{{baseUrl}}/api/financial-profile/{{userId}}/household" } },
        { "name": "Risk & Goals: Upsert", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": { "mode": "raw", "raw": "{\n  \"riskTolerance\": 7\n}" }, "url": "{{baseUrl}}/api/financial-profile/{{userId}}/risk-goals" } },
        { "name": "Risk & Goals: Get", "request": { "method": "GET", "url": "{{baseUrl}}/api/financial-profile/{{userId}}/risk-goals" } },
  { "name": "TSP: Upsert", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": { "mode": "raw", "raw": "{\n  \"contributionRatePercent\": 5,\n  \"gFundPercent\": 40,\n  \"fFundPercent\": 10,\n  \"cFundPercent\": 30,\n  \"sFundPercent\": 10,\n  \"iFundPercent\": 10,\n  \"lifecyclePositions\": [ { \"fundCode\": \"L2030\", \"contributionPercent\": 10, \"units\": 100, \"dateUpdated\": \"2025-10-18T00:00:00Z\" } ]\n}" }, "url": "{{baseUrl}}/api/financial-profile/{{userId}}/tsp" } },
        { "name": "TSP: Get", "request": { "method": "GET", "url": "{{baseUrl}}/api/financial-profile/{{userId}}/tsp" } },
        { "name": "TSP: Summary", "request": { "method": "GET", "url": "{{baseUrl}}/api/financial-profile/{{userId}}/tsp/summary" } },
  { "name": "TSP: Summary Lite", "request": { "method": "GET", "url": "{{baseUrl}}/api/financial-profile/{{userId}}/tsp/summary-lite" } },
        { "name": "TSP: Detail (positions + all prices)", "request": { "method": "GET", "url": "{{baseUrl}}/api/financial-profile/{{userId}}/tsp/detail" } },
        { "name": "TSP: Snapshot (Create)", "request": { "method": "POST", "url": "{{baseUrl}}/api/financial-profile/{{userId}}/tsp/snapshot" } },
        { "name": "TSP: Snapshot (Latest Meta)", "request": { "method": "GET", "url": "{{baseUrl}}/api/financial-profile/{{userId}}/tsp/snapshot/latest" } },
  { "name": "TSP: Backfill Base Funds (dry run)", "request": { "method": "POST", "url": "{{baseUrl}}/api/financial-profile/{{userId}}/tsp/backfill/base-funds?dryRun=true" } },
  { "name": "TSP: Backfill Base Funds (execute)", "request": { "method": "POST", "url": "{{baseUrl}}/api/financial-profile/{{userId}}/tsp/backfill/base-funds?dryRun=false" } },
        { "name": "Cash: Upsert", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": { "mode": "raw", "raw": "{\n  \"accounts\": [ { \"nickname\": \"Checking\", \"accountType\": \"checking\", \"balance\": 1200 } ]\n}" }, "url": "{{baseUrl}}/api/financial-profile/{{userId}}/cash" } },
        { "name": "Cash: Get", "request": { "method": "GET", "url": "{{baseUrl}}/api/financial-profile/{{userId}}/cash" } },
        { "name": "Investments: Upsert", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": { "mode": "raw", "raw": "{\n  \"accounts\": [ { \"accountName\": \"Brokerage\", \"currentValue\": 5000 } ]\n}" }, "url": "{{baseUrl}}/api/financial-profile/{{userId}}/investments" } },
        { "name": "Investments: Get", "request": { "method": "GET", "url": "{{baseUrl}}/api/financial-profile/{{userId}}/investments" } },
        { "name": "Real Estate: Upsert", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": { "mode": "raw", "raw": "{\n  \"properties\": [ { \"propertyName\": \"Home\", \"estimatedValue\": 350000, \"mortgageBalance\": 280000 } ]\n}" }, "url": "{{baseUrl}}/api/financial-profile/{{userId}}/real-estate" } },
        { "name": "Real Estate: Get", "request": { "method": "GET", "url": "{{baseUrl}}/api/financial-profile/{{userId}}/real-estate" } },
        { "name": "Liabilities: Upsert", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": { "mode": "raw", "raw": "{\n  \"liabilities\": [ { \"liabilityType\": \"loan\", \"currentBalance\": 3000 } ]\n}" }, "url": "{{baseUrl}}/api/financial-profile/{{userId}}/liabilities" } },
        { "name": "Liabilities: Get", "request": { "method": "GET", "url": "{{baseUrl}}/api/financial-profile/{{userId}}/liabilities" } },
        { "name": "Expenses: Upsert", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": { "mode": "raw", "raw": "{\n  \"expenses\": [ { \"category\": \"general\", \"monthlyAmount\": 200 } ]\n}" }, "url": "{{baseUrl}}/api/financial-profile/{{userId}}/expenses" } },
        { "name": "Expenses: Get", "request": { "method": "GET", "url": "{{baseUrl}}/api/financial-profile/{{userId}}/expenses" } },
        { "name": "Tax: Upsert", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": { "mode": "raw", "raw": "{\n  \"filingStatus\": \"single\"\n}" }, "url": "{{baseUrl}}/api/financial-profile/{{userId}}/tax" } },
        { "name": "Tax: Get", "request": { "method": "GET", "url": "{{baseUrl}}/api/financial-profile/{{userId}}/tax" } },
        { "name": "Insurance: Upsert", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": { "mode": "raw", "raw": "{\n  \"policies\": [ { \"policyType\": \"term-life\", \"coverageAmount\": 500000 } ]\n}" }, "url": "{{baseUrl}}/api/financial-profile/{{userId}}/insurance" } },
        { "name": "Insurance: Get", "request": { "method": "GET", "url": "{{baseUrl}}/api/financial-profile/{{userId}}/insurance" } },
        { "name": "Benefits: Upsert", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": { "mode": "raw", "raw": "{\n  \"benefits\": [ { \"benefitType\": \"health\", \"isEnrolled\": true } ]\n}" }, "url": "{{baseUrl}}/api/financial-profile/{{userId}}/benefits" } },
        { "name": "Benefits: Get", "request": { "method": "GET", "url": "{{baseUrl}}/api/financial-profile/{{userId}}/benefits" } },
        { "name": "Long-Term Obligations: Upsert", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": { "mode": "raw", "raw": "{\n  \"obligations\": [ { \"obligationName\": \"HELOC\", \"estimatedCost\": 8000 } ]\n}" }, "url": "{{baseUrl}}/api/financial-profile/{{userId}}/long-term-obligations" } },
        { "name": "Long-Term Obligations: Get", "request": { "method": "GET", "url": "{{baseUrl}}/api/financial-profile/{{userId}}/long-term-obligations" } },
        { "name": "Income: Upsert", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": { "mode": "raw", "raw": "{\n  \"streams\": [ { \"name\": \"Salary\", \"monthlyAmount\": 5000 } ]\n}" }, "url": "{{baseUrl}}/api/financial-profile/{{userId}}/income" } },
        { "name": "Income: Get", "request": { "method": "GET", "url": "{{baseUrl}}/api/financial-profile/{{userId}}/income" } },
        { "name": "Equity: Upsert", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": { "mode": "raw", "raw": "{\n  \"isInterestedInTracking\": true\n}" }, "url": "{{baseUrl}}/api/financial-profile/{{userId}}/equity" } },
                { "name": "Equity: Get", "request": { "method": "GET", "url": "{{baseUrl}}/api/financial-profile/{{userId}}/equity" } }
      ]
    },
    {
      "name": "Cash Accounts Management",
      "item": [
        { 
          "name": "List Cash Accounts", 
          "request": { 
            "method": "GET", 
            "url": "{{baseUrl}}/api/cashaccounts?userId={{userId}}" 
          } 
        },
        { 
          "name": "Get Cash Account", 
          "request": { 
            "method": "GET", 
            "url": "{{baseUrl}}/api/cashaccounts/{{cashAccountId}}" 
          } 
        },
        { 
          "name": "Create Cash Account", 
          "request": { 
            "method": "POST", 
            "header": [{"key":"Content-Type","value":"application/json"}], 
            "body": { 
              "mode": "raw", 
              "raw": "{\n  \"userId\": {{userId}},\n  \"institution\": \"Chase\",\n  \"nickname\": \"Emergency Fund\",\n  \"accountType\": \"savings\",\n  \"balance\": 5000.00,\n  \"interestRateApr\": 4.5,\n  \"purpose\": \"Emergency savings\",\n  \"isEmergencyFund\": true\n}" 
            }, 
            "url": "{{baseUrl}}/api/cashaccounts" 
          } 
        },
        { 
          "name": "Update Cash Account", 
          "request": { 
            "method": "PUT", 
            "header": [{"key":"Content-Type","value":"application/json"}], 
            "body": { 
              "mode": "raw", 
              "raw": "{\n  \"nickname\": \"Updated Checking\",\n  \"institution\": \"Wells Fargo\",\n  \"balance\": 3500.00,\n  \"interestRateApr\": 0.01,\n  \"purpose\": \"Daily transactions\"\n}" 
            }, 
            "url": "{{baseUrl}}/api/cashaccounts/{{cashAccountId}}" 
          } 
        },
        { 
          "name": "Delete Cash Account", 
          "request": { 
            "method": "DELETE", 
            "url": "{{baseUrl}}/api/cashaccounts/{{cashAccountId}}" 
          } 
        },
        {
          "name": "Import Cash Accounts (CSV)",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "/path/to/your/cash-accounts.csv",
                  "description": "CSV file with columns: Institution, Nickname, AccountType, Balance, InterestRateApr, Purpose, IsEmergencyFund"
                }
              ]
            },
            "url": "{{baseUrl}}/api/cashaccounts/import?userId={{userId}}"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Plaid Integration",
      "description": "Plaid bank account linking endpoints (Wave 11). Requires authentication. Test with Plaid Sandbox: user_good / pass_good / MFA: 1234",
      "item": [
        {
          "name": "Create Link Token",
          "request": {
            "method": "POST",
            "header": [{"key": "Authorization", "value": "Bearer {{accessToken}}"}],
            "url": "{{baseUrl}}/api/plaid/link-token"
          },
          "response": []
        },
        {
          "name": "Exchange Public Token",
          "request": {
            "method": "POST",
            "header": [
              {"key": "Authorization", "value": "Bearer {{accessToken}}"},
              {"key": "Content-Type", "value": "application/json"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"publicToken\": \"public-sandbox-xxxxxxxx\"\n}"
            },
            "url": "{{baseUrl}}/api/plaid/exchange-token"
          },
          "response": []
        },
        {
          "name": "List Connections",
          "request": {
            "method": "GET",
            "header": [{"key": "Authorization", "value": "Bearer {{accessToken}}"}],
            "url": "{{baseUrl}}/api/plaid/connections"
          },
          "response": []
        },
        {
          "name": "Get Connection Accounts",
          "request": {
            "method": "GET",
            "header": [{"key": "Authorization", "value": "Bearer {{accessToken}}"}],
            "url": "{{baseUrl}}/api/plaid/connections/{{connectionId}}/accounts"
          },
          "response": []
        },
        {
          "name": "Sync Connection",
          "request": {
            "method": "POST",
            "header": [{"key": "Authorization", "value": "Bearer {{accessToken}}"}],
            "url": "{{baseUrl}}/api/plaid/connections/{{connectionId}}/sync"
          },
          "response": []
        },
        {
          "name": "Sync All Connections",
          "request": {
            "method": "POST",
            "header": [{"key": "Authorization", "value": "Bearer {{accessToken}}"}],
            "url": "{{baseUrl}}/api/plaid/sync-all"
          },
          "response": []
        },
        {
          "name": "Get Sync History",
          "request": {
            "method": "GET",
            "header": [{"key": "Authorization", "value": "Bearer {{accessToken}}"}],
            "url": "{{baseUrl}}/api/plaid/connections/{{connectionId}}/history?limit=10"
          },
          "response": []
        },
        {
          "name": "Disconnect Connection",
          "request": {
            "method": "DELETE",
            "header": [{"key": "Authorization", "value": "Bearer {{accessToken}}"}],
            "url": "{{baseUrl}}/api/plaid/connections/{{connectionId}}"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Holdings",
      "description": "Holdings are automatically synchronized with Transactions. When you create/update/delete transactions with symbols, the corresponding holdings are automatically created or updated with correct quantities and weighted average cost basis. Use INITIAL_BALANCE transactions to onboard existing portfolios.",
      "item": [
        {
          "name": "List Holdings by Account",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/holdings?accountId={{accountId}}"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});",
                  "",
                  "if (pm.response.json().length > 0) {",
                  "    var firstHolding = pm.response.json()[0];",
                  "    pm.collectionVariables.set('holdingId', firstHolding.holdingId);",
                  "    console.log('Holdings found:', pm.response.json().length);",
                  "    console.log('First holding:', firstHolding.symbol, '-', firstHolding.quantity, 'shares @', firstHolding.averageCostBasis);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get Holding",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/holdings/{{holdingId}}"
          }
        },
        {
          "name": "Create Holding",
          "request": {
            "method": "POST",
            "header": [{"key":"Content-Type","value":"application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"accountId\": {{accountId}},\n  \"symbol\": \"AAPL\",\n  \"name\": \"Apple Inc.\",\n  \"assetType\": 0,\n  \"quantity\": 100,\n  \"averageCostBasis\": 150.00,\n  \"currentPrice\": 180.00,\n  \"annualDividendYield\": 0.0052,\n  \"isQualifiedDividend\": true,\n  \"purchaseDate\": \"2023-01-15T00:00:00Z\",\n  \"isLongTermCapitalGains\": true,\n  \"beta\": 1.2,\n  \"sectorAllocation\": \"Technology\",\n  \"notes\": \"Test holding\"\n}"
            },
            "url": "{{baseUrl}}/api/holdings"
          }
        },
        {
          "name": "Update Holding",
          "request": {
            "method": "PUT",
            "header": [{"key":"Content-Type","value":"application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"currentPrice\": 185.50,\n  \"annualDividendIncome\": 93.60,\n  \"notes\": \"Updated price\"\n}"
            },
            "url": "{{baseUrl}}/api/holdings/{{holdingId}}"
          }
        },
        {
          "name": "Delete Holding",
          "request": {
            "method": "DELETE",
            "url": "{{baseUrl}}/api/holdings/{{holdingId}}"
          }
        },
        {
          "name": "Refresh Prices",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/api/holdings/refresh-prices?accountId={{accountId}}"
          }
        },
        {
          "name": "Get Price History",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/holdings/{{holdingId}}/price-history?period=1M"
          }
        }
      ]
    },
    {
      "name": "Market Data",
      "item": [
        {
          "name": "Get Quote (Single)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/market-data/quote/AAPL"
          }
        },
        {
          "name": "Get Quotes (Bulk)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/market-data/quotes?symbols=AAPL,MSFT,SPY,BTC-USD"
          }
        },
        {
          "name": "Get Historical Prices",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/market-data/historical/AAPL?from=2024-01-01&to=2024-12-31"
          }
        },
        {
          "name": "Get Company Profile",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/market-data/company/AAPL"
          }
        }
      ]
    },
    {
      "name": "Transactions",
      "description": "Investment transactions automatically create and update Holdings. Use INITIAL_BALANCE to onboard existing portfolios. BUY/SELL transactions update quantities and weighted average cost basis using FIFO. Supports 26+ transaction types including stocks, ETFs, crypto, TSP funds, dividends, splits, and more.",
      "item": [
        {
          "name": "List Transactions (by Account)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/transactions?accountId={{accountId}}"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.json().length > 0) {",
                  "    var firstTxn = pm.response.json()[0];",
                  "    pm.collectionVariables.set('transactionId', firstTxn.transactionId);",
                  "    console.log('Transactions found:', pm.response.json().length);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "List Transactions (by Holding)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/transactions?holdingId={{holdingId}}"
          }
        },
        {
          "name": "List Transactions (Date Range)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/transactions?accountId={{accountId}}&startDate=2023-01-01T00:00:00Z&endDate=2023-12-31T23:59:59Z"
          }
        },
        {
          "name": "List Transactions (by Type)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/transactions?accountId={{accountId}}&transactionType=BUY"
          }
        },
        {
          "name": "Get Transaction",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/transactions/{{transactionId}}"
          }
        },
        {
          "name": "Create Transaction (BUY)",
          "request": {
            "method": "POST",
            "header": [{"key":"Content-Type","value":"application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"accountId\": {{accountId}},\n  \"holdingId\": {{holdingId}},\n  \"transactionType\": \"BUY\",\n  \"symbol\": \"AAPL\",\n  \"quantity\": 100,\n  \"price\": 150.00,\n  \"amount\": 15000.00,\n  \"fee\": 9.95,\n  \"transactionDate\": \"2023-01-15T10:30:00Z\",\n  \"settlementDate\": \"2023-01-17T00:00:00Z\",\n  \"isTaxable\": true,\n  \"costBasis\": 15009.95,\n  \"source\": 0,\n  \"description\": \"Initial purchase\"\n}"
            },
            "url": "{{baseUrl}}/api/transactions"
          }
        },
        {
          "name": "Create Transaction (DIVIDEND)",
          "request": {
            "method": "POST",
            "header": [{"key":"Content-Type","value":"application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"accountId\": {{accountId}},\n  \"holdingId\": {{holdingId}},\n  \"transactionType\": \"DIVIDEND\",\n  \"symbol\": \"AAPL\",\n  \"amount\": 93.60,\n  \"fee\": 0,\n  \"transactionDate\": \"2023-06-15T00:00:00Z\",\n  \"settlementDate\": \"2023-06-15T00:00:00Z\",\n  \"isTaxable\": true,\n  \"isQualifiedDividend\": true,\n  \"source\": 0,\n  \"description\": \"Quarterly dividend\"\n}"
            },
            "url": "{{baseUrl}}/api/transactions"
          }
        },
        {
          "name": "Create Transaction (DEPOSIT)",
          "request": {
            "method": "POST",
            "header": [{"key":"Content-Type","value":"application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"accountId\": {{accountId}},\n  \"transactionType\": \"DEPOSIT\",\n  \"amount\": 5000.00,\n  \"fee\": 0,\n  \"transactionDate\": \"2023-07-01T00:00:00Z\",\n  \"settlementDate\": \"2023-07-01T00:00:00Z\",\n  \"isTaxable\": false,\n  \"source\": 0,\n  \"description\": \"Cash deposit\"\n}"
            },
            "url": "{{baseUrl}}/api/transactions"
          }
        },
        {
          "name": "Create Transaction (INITIAL_BALANCE)",
          "request": {
            "method": "POST",
            "header": [{"key":"Content-Type","value":"application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"accountId\": {{accountId}},\n  \"transactionType\": \"INITIAL_BALANCE\",\n  \"symbol\": \"VOO\",\n  \"name\": \"Vanguard S&P 500 ETF\",\n  \"quantity\": 80,\n  \"price\": 390.00,\n  \"amount\": -31200.00,\n  \"fee\": 0,\n  \"transactionDate\": \"2023-01-01T00:00:00Z\",\n  \"settlementDate\": \"2023-01-01T00:00:00Z\",\n  \"isTaxable\": true,\n  \"costBasis\": 31200.00,\n  \"source\": 0,\n  \"description\": \"Initial portfolio onboarding - existing position\"\n}"
            },
            "url": "{{baseUrl}}/api/transactions"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// INITIAL_BALANCE transactions automatically:",
                  "// 1. Create a new Holding if symbol doesn't exist",
                  "// 2. Set quantity and average cost basis",
                  "// 3. Establish purchase date and tax status",
                  "// 4. Infer asset type from symbol (ends with -USD = crypto, starts with TSP = TSP fund, else stock/ETF)",
                  "",
                  "pm.test(\"Status code is 200 or 201\", function () {",
                  "    pm.expect([200, 201]).to.include(pm.response.code);",
                  "});",
                  "",
                  "pm.test(\"Response has transactionId\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.transactionId).to.exist;",
                  "    pm.collectionVariables.set('transactionId', jsonData.transactionId);",
                  "});",
                  "",
                  "pm.test(\"Holding auto-created or linked\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.holdingId).to.exist;",
                  "    pm.collectionVariables.set('holdingId', jsonData.holdingId);",
                  "    console.log('Transaction linked to HoldingId:', jsonData.holdingId);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Create Transaction (SELL)",
          "request": {
            "method": "POST",
            "header": [{"key":"Content-Type","value":"application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"accountId\": {{accountId}},\n  \"holdingId\": {{holdingId}},\n  \"transactionType\": \"SELL\",\n  \"symbol\": \"AAPL\",\n  \"quantity\": 50,\n  \"price\": 180.00,\n  \"amount\": 9000.00,\n  \"fee\": 9.95,\n  \"transactionDate\": \"2024-06-15T14:30:00Z\",\n  \"settlementDate\": \"2024-06-17T00:00:00Z\",\n  \"isTaxable\": true,\n  \"realizedGain\": 1490.05,\n  \"source\": 0,\n  \"description\": \"Partial position sale\"\n}"
            },
            "url": "{{baseUrl}}/api/transactions"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// SELL transactions automatically:",
                  "// 1. Reduce holding quantity",
                  "// 2. Recalculate average cost basis using FIFO",
                  "// 3. Calculate realized gains",
                  "",
                  "pm.test(\"Status code is 200 or 201\", function () {",
                  "    pm.expect([200, 201]).to.include(pm.response.code);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Update Transaction",
          "request": {
            "method": "PUT",
            "header": [{"key":"Content-Type","value":"application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"description\": \"Updated description\",\n  \"notes\": \"Added notes\"\n}"
            },
            "url": "{{baseUrl}}/api/transactions/{{transactionId}}"
          }
        },
        {
          "name": "Delete Transaction",
          "request": {
            "method": "DELETE",
            "url": "{{baseUrl}}/api/transactions/{{transactionId}}"
          }
        }
      ]
    },
    {
      "name": "Dashboard",
      "item": [
        { "name": "Get Dashboard", "request": { "method": "GET", "url": "{{baseUrl}}/api/dashboard?userId={{userId}}" } }
      ]
    },
    {
      "name": "Net Worth Timeline",
      "description": "Dashboard net worth history and tracking",
      "item": [
        { "name": "Get Timeline", "request": { "method": "GET", "url": "{{baseUrl}}/api/dashboard/net-worth/timeline?userId={{userId}}&months=12" } },
        { "name": "Get Current Net Worth", "request": { "method": "GET", "url": "{{baseUrl}}/api/dashboard/net-worth/current?userId={{userId}}" } },
        { "name": "Get Sparkline", "request": { "method": "GET", "url": "{{baseUrl}}/api/dashboard/net-worth/sparkline?userId={{userId}}&days=30" } }
      ]
    },
    {
      "name": "Loan Analytics",
      "description": "Loan amortization, payoff strategies, and credit utilization analysis",
      "item": [
        { "name": "Get Amortization Schedule", "request": { "method": "GET", "url": "{{baseUrl}}/api/loan-analytics/{{loanId}}/amortization" } },
        { "name": "Calculate Payoff Strategies", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": { "mode": "raw", "raw": "{\n  \"extraPayment\": 200,\n  \"oneTimePayment\": 0\n}" }, "url": "{{baseUrl}}/api/loan-analytics/{{loanId}}/payoff" } },
        { "name": "Get Loan Details", "request": { "method": "GET", "url": "{{baseUrl}}/api/loan-analytics/{{loanId}}" } },
        { "name": "Get Credit Utilization (by liability)", "request": { "method": "GET", "url": "{{baseUrl}}/api/loan-analytics/credit-utilization/{{liabilityId}}" } },
        { "name": "Get User Credit Utilization", "request": { "method": "GET", "url": "{{baseUrl}}/api/loan-analytics/credit-utilization/user/{{userId}}" } },
        { "name": "Get Payoff Strategies (user)", "request": { "method": "GET", "url": "{{baseUrl}}/api/loan-analytics/payoff-strategies/{{userId}}" } }
      ]
    },
    {
      "name": "Portfolio Analytics",
      "description": "Portfolio performance and allocation analysis",
      "item": [
        { "name": "Get Performance Metrics", "request": { "method": "GET", "url": "{{baseUrl}}/api/portfolios/{{userId}}/performance?period=1Y" } },
        { "name": "Get Allocation", "request": { "method": "GET", "url": "{{baseUrl}}/api/portfolios/{{userId}}/allocation" } }
      ]
    },
    {
      "name": "Price History",
      "description": "Historical price data for holdings",
      "item": [
        { "name": "Get Price History (symbol)", "request": { "method": "GET", "url": "{{baseUrl}}/api/price-history/AAPL?period=1M" } },
        { "name": "Get Price History (batch)", "request": { "method": "GET", "url": "{{baseUrl}}/api/price-history/batch?symbols=AAPL,MSFT,SPY&period=1M" } },
        { "name": "Backfill Account Price History", "request": { "method": "POST", "url": "{{baseUrl}}/api/price-history/backfill/{{accountId}}" } }
      ]
    },
    {
      "name": "Account Refresh",
      "description": "Account refresh and snapshot operations",
      "item": [
        { "name": "Refresh Account", "request": { "method": "POST", "url": "{{baseUrl}}/api/accounts/{{accountId}}/refresh" } },
        { "name": "Refresh All Accounts", "request": { "method": "POST", "url": "{{baseUrl}}/api/accounts/refresh-all?userId={{userId}}" } },
        { "name": "Trigger Snapshot", "request": { "method": "POST", "url": "{{baseUrl}}/api/accounts/{{accountId}}/snapshot" } },
        { "name": "Queue Refresh All (async)", "request": { "method": "POST", "url": "{{baseUrl}}/api/accounts/refresh-all/async?userId={{userId}}" } },
        { "name": "Queue Snapshot All (async)", "request": { "method": "POST", "url": "{{baseUrl}}/api/accounts/snapshot-all/async?userId={{userId}}" } }
      ]
    },
    {
      "name": "Market Data",
      "item": [
        { "name": "Stock Price (one)", "request": { "method": "GET", "url": "{{baseUrl}}/api/market/price/MSFT" } },
        { "name": "Stock Prices (batch)", "request": { "method": "GET", "url": "{{baseUrl}}/api/market/prices?symbols=AAPL,MSFT,GOOGL" } },
        { "name": "Market Indices", "request": { "method": "GET", "url": "{{baseUrl}}/api/market/indices" } },
        { "name": "TSP Fund Prices", "request": { "method": "GET", "url": "{{baseUrl}}/api/market/tsp" } },
        { "name": "Economic Indicators", "request": { "method": "GET", "url": "{{baseUrl}}/api/market/economic" } },
        { "name": "Market Overview", "request": { "method": "GET", "url": "{{baseUrl}}/api/market/overview" } },
        { "name": "Market Health", "request": { "method": "GET", "url": "{{baseUrl}}/api/market/health" } }
      ]
    },
    {
      "name": "Accounts",
      "item": [
        { "name": "By User", "request": { "method": "GET", "url": "{{baseUrl}}/api/Accounts/user/{{userId}}" } },
        { "name": "Get", "request": { "method": "GET", "url": "{{baseUrl}}/api/Accounts/{{accountId}}" } },
        { "name": "Create (SKELETON)", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "{\n  \"userId\": {{userId}},\n  \"name\": \"My Brokerage Account\",\n  \"institution\": \"Vanguard\",\n  \"type\": \"Brokerage\",\n  \"balance\": 10000.00,\n  \"accountNumber\": \"1234\"\n}"}, "url": "{{baseUrl}}/api/Accounts" } },
        { "name": "Update", "request": { "method": "PUT", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "{\n  \"name\": \"Updated Account Name\",\n  \"institution\": \"USAA\",\n  \"type\": \"Savings\",\n  \"balance\": 3000.00,\n  \"accountNumber\": \"5678\"\n}"}, "url": "{{baseUrl}}/api/Accounts/{{accountId}}" } },
        { "name": "Update Balance (SKELETON only)", "request": { "method": "PATCH", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "{\n  \"newBalance\": 12500.00\n}"}, "url": "{{baseUrl}}/api/Accounts/{{accountId}}/balance" } },
        { "name": "Transition to DETAILED", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "{\n  \"holdings\": [\n    {\n      \"symbol\": \"VTI\",\n      \"name\": \"Vanguard Total Stock Market ETF\",\n      \"assetType\": 1,\n      \"quantity\": 50,\n      \"price\": 200.00\n    },\n    {\n      \"symbol\": \"BND\",\n      \"name\": \"Vanguard Total Bond Market ETF\",\n      \"assetType\": 2,\n      \"quantity\": 25,\n      \"price\": 100.00\n    }\n  ],\n  \"acquisitionDate\": \"2024-01-15T00:00:00Z\"\n}"}, "url": "{{baseUrl}}/api/Accounts/{{accountId}}/transition-to-detailed" } },
        { "name": "Recalculate Balance (DETAILED only)", "request": { "method": "POST", "url": "{{baseUrl}}/api/Accounts/{{accountId}}/recalculate-balance" }, "response": [], "event": [{ "listen": "test", "script": { "exec": ["pm.test(\"Status code is 200\", function () {", "    pm.response.to.have.status(200);", "});", "", "pm.test(\"Response has balance info\", function () {", "    var jsonData = pm.response.json();", "    pm.expect(jsonData.accountId).to.exist;", "    pm.expect(jsonData.previousBalance).to.exist;", "    pm.expect(jsonData.newBalance).to.exist;", "    console.log('Balance updated:', jsonData.previousBalance, '->', jsonData.newBalance);", "});"], "type": "text/javascript" } }] },
        { "name": "Delete", "request": { "method": "DELETE", "url": "{{baseUrl}}/api/Accounts/{{accountId}}" } },
        { "name": "TSP Allocation (update)", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "{\n  \"gFundPercentage\": 40,\n  \"fFundPercentage\": 10,\n  \"cFundPercentage\": 30,\n  \"sFundPercentage\": 10,\n  \"iFundPercentage\": 10\n}"}, "url": "{{baseUrl}}/api/Accounts/{{accountId}}/tsp-allocation" } },
        { "name": "Performance", "request": { "method": "GET", "url": "{{baseUrl}}/api/Accounts/{{accountId}}/performance" } },
        { "name": "Cash Optimization (user)", "request": { "method": "GET", "url": "{{baseUrl}}/api/Accounts/cash-optimization/user/{{userId}}" } }
      ]
    },
    {
      "name": "Users",
      "item": [
        { "name": "List Users", "request": { "method": "GET", "url": "{{baseUrl}}/api/Users" } },
        { "name": "Get User", "request": { "method": "GET", "url": "{{baseUrl}}/api/Users/{{userId}}" } },
        { "name": "Create User", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "{\n  \"firstName\": \"Jane\",\n  \"lastName\": \"Doe\",\n  \"email\": \"jane+{{guid}}@pfmp.local\"\n}"}, "url": "{{baseUrl}}/api/Users" } },
        { "name": "Update User", "request": { "method": "PUT", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "{\n  \"userId\": {{userId}},\n  \"firstName\": \"Jane\",\n  \"lastName\": \"Doe\"\n}"}, "url": "{{baseUrl}}/api/Users/{{userId}}" } },
        { "name": "Delete User", "request": { "method": "DELETE", "url": "{{baseUrl}}/api/Users/{{userId}}" } },
        { "name": "User Summary", "request": { "method": "GET", "url": "{{baseUrl}}/api/Users/{{userId}}/summary" } }
      ]
    },
    {
      "name": "Income Sources",
      "item": [
        { "name": "By User", "request": { "method": "GET", "url": "{{baseUrl}}/api/IncomeSources/user/{{userId}}" } },
        { "name": "Get", "request": { "method": "GET", "url": "{{baseUrl}}/api/IncomeSources/{{incomeSourceId}}" } },
        { "name": "Create", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "{\n  \"userId\": {{userId}},\n  \"name\": \"Salary\",\n  \"type\": 0,\n  \"frequency\": 0,\n  \"amount\": 5000\n}"}, "url": "{{baseUrl}}/api/IncomeSources" } },
        { "name": "Update", "request": { "method": "PUT", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "{\n  \"incomeSourceId\": {{incomeSourceId}},\n  \"userId\": {{userId}},\n  \"name\": \"Salary\",\n  \"type\": 0,\n  \"frequency\": 0,\n  \"amount\": 5200\n}"}, "url": "{{baseUrl}}/api/IncomeSources/{{incomeSourceId}}" } },
        { "name": "Delete", "request": { "method": "DELETE", "url": "{{baseUrl}}/api/IncomeSources/{{incomeSourceId}}" } },
        { "name": "VA Disability Info", "request": { "method": "GET", "url": "{{baseUrl}}/api/IncomeSources/va-disability/user/{{userId}}" } },
        { "name": "Income Summary", "request": { "method": "GET", "url": "{{baseUrl}}/api/IncomeSources/summary/user/{{userId}}" } }
      ]
    },
    {
      "name": "Goals",
      "item": [
        { "name": "By User", "request": { "method": "GET", "url": "{{baseUrl}}/api/Goals/user/{{userId}}" } },
        { "name": "Get", "request": { "method": "GET", "url": "{{baseUrl}}/api/Goals/{{goalId}}" } },
        { "name": "Create", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "{\n  \"userId\": {{userId}},\n  \"name\": \"Emergency Fund\",\n  \"type\": 0,\n  \"targetAmount\": 10000\n}"}, "url": "{{baseUrl}}/api/Goals" } },
        { "name": "Update", "request": { "method": "PUT", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "{\n  \"goalId\": {{goalId}},\n  \"userId\": {{userId}},\n  \"name\": \"Emergency Fund\",\n  \"targetAmount\": 15000\n}"}, "url": "{{baseUrl}}/api/Goals/{{goalId}}" } },
        { "name": "Delete", "request": { "method": "DELETE", "url": "{{baseUrl}}/api/Goals/{{goalId}}" } },
        { "name": "Update Progress", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "5000"}, "url": "{{baseUrl}}/api/Goals/{{goalId}}/progress" } },
        { "name": "Emergency Fund Status", "request": { "method": "GET", "url": "{{baseUrl}}/api/Goals/emergency-fund/user/{{userId}}" } }
      ]
    },
    {
      "name": "Portfolio",
      "item": [
        { "name": "Valuation", "request": { "method": "GET", "url": "{{baseUrl}}/api/Portfolio/{{userId}}/valuation" } },
        { "name": "Accounts", "request": { "method": "GET", "url": "{{baseUrl}}/api/Portfolio/{{userId}}/accounts" } },
        { "name": "Update Prices", "request": { "method": "POST", "url": "{{baseUrl}}/api/Portfolio/{{userId}}/update-prices" } },
        { "name": "Performance", "request": { "method": "GET", "url": "{{baseUrl}}/api/Portfolio/{{userId}}/performance" } },
        { "name": "Net Worth", "request": { "method": "GET", "url": "{{baseUrl}}/api/Portfolio/{{userId}}/net-worth" } },
        { "name": "Dashboard", "request": { "method": "GET", "url": "{{baseUrl}}/api/Portfolio/{{userId}}/dashboard" } }
      ]
    },
    {
      "name": "Alerts",
      "item": [
        { "name": "List Alerts (by user)", "request": { "method": "GET", "url": "{{baseUrl}}/api/Alerts?userId={{userId}}" } },
        { "name": "Get Alert", "request": { "method": "GET", "url": "{{baseUrl}}/api/Alerts/{{alertId}}" } },
        { "name": "Create Alert", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "{\n  \"userId\": {{userId}},\n  \"title\": \"Rate change\",\n  \"message\": \"Check new HYSA rates\",\n  \"category\": \"cash\",\n  \"severity\": 1\n}"}, "url": "{{baseUrl}}/api/Alerts" } },
        { "name": "Update Alert", "request": { "method": "PUT", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "{\n  \"alertId\": {{alertId}},\n  \"userId\": {{userId}},\n  \"title\": \"Rate change\",\n  \"message\": \"Updated\"\n}"}, "url": "{{baseUrl}}/api/Alerts/{{alertId}}" } },
        { "name": "Mark Read", "request": { "method": "PATCH", "url": "{{baseUrl}}/api/Alerts/{{alertId}}/read" } },
        { "name": "Dismiss", "request": { "method": "PATCH", "url": "{{baseUrl}}/api/Alerts/{{alertId}}/dismiss" } },
        { "name": "Undismiss", "request": { "method": "PATCH", "url": "{{baseUrl}}/api/Alerts/{{alertId}}/undismiss" } },
        { "name": "Delete", "request": { "method": "DELETE", "url": "{{baseUrl}}/api/Alerts/{{alertId}}" } }
      ]
    },
    {
      "name": "Advice",
      "item": [
        { "name": "Generate", "request": { "method": "POST", "url": "{{baseUrl}}/api/Advice/generate/{{userId}}" } },
        { "name": "List For User", "request": { "method": "GET", "url": "{{baseUrl}}/api/Advice/user/{{userId}}" } },
        { "name": "Accept", "request": { "method": "POST", "url": "{{baseUrl}}/api/Advice/{{adviceId}}/accept" } },
        { "name": "Dismiss", "request": { "method": "POST", "url": "{{baseUrl}}/api/Advice/{{adviceId}}/dismiss" } }
      ]
    },
    {
      "name": "Tasks",
      "item": [
        { "name": "List (by user)", "request": { "method": "GET", "url": "{{baseUrl}}/api/tasks?userId={{userId}}" } },
        { "name": "Get", "request": { "method": "GET", "url": "{{baseUrl}}/api/tasks/{{taskId}}" } },
        { "name": "Create", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "{\n  \"userId\": {{userId}},\n  \"type\": 1,\n  \"title\": \"Follow up: Example\",\n  \"description\": \"Example desc\",\n  \"priority\": 2\n}"}, "url": "{{baseUrl}}/api/tasks" } },
        { "name": "Update", "request": { "method": "PUT", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "{\n  \"taskId\": {{taskId}},\n  \"userId\": {{userId}},\n  \"type\": 1,\n  \"title\": \"Updated\",\n  \"description\": \"Updated desc\",\n  \"priority\": 2,\n  \"status\": 1\n}"}, "url": "{{baseUrl}}/api/tasks/{{taskId}}" } },
        { "name": "Complete", "request": { "method": "PATCH", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "{\n  \"completionNotes\": \"Done\"\n}"}, "url": "{{baseUrl}}/api/tasks/{{taskId}}/complete" } },
        { "name": "Dismiss", "request": { "method": "PATCH", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "\"Optional notes\""}, "url": "{{baseUrl}}/api/tasks/{{taskId}}/dismiss" } },
        { "name": "Update Progress", "request": { "method": "PATCH", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "50"}, "url": "{{baseUrl}}/api/tasks/{{taskId}}/progress" } },
        { "name": "Update Status", "request": { "method": "PATCH", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "1"}, "url": "{{baseUrl}}/api/tasks/{{taskId}}/status" } },
        { "name": "Analytics", "request": { "method": "GET", "url": "{{baseUrl}}/api/tasks/analytics/{{userId}}" } },
        {
          "name": "AI",
          "item": [
            { "name": "Recommendations", "request": { "method": "GET", "url": "{{baseUrl}}/api/tasks/ai/recommendations?userId={{userId}}" } },
            { "name": "Priority", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "{\n  \"userId\": {{userId}},\n  \"title\": \"Task title\",\n  \"description\": \"Task details\"\n}"}, "url": "{{baseUrl}}/api/tasks/ai/priority" } },
            { "name": "Category", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "{\n  \"userId\": {{userId}},\n  \"title\": \"Task title\",\n  \"description\": \"Task details\"\n}"}, "url": "{{baseUrl}}/api/tasks/ai/category" } },
            { "name": "Portfolio Analysis", "request": { "method": "GET", "url": "{{baseUrl}}/api/tasks/ai/portfolio-analysis?userId={{userId}}" } },
            { "name": "Market Alerts", "request": { "method": "GET", "url": "{{baseUrl}}/api/tasks/ai/market-alerts?userId={{userId}}" } }
          ]
        }
      ]
    },
    {
      "name": "AI",
      "item": [
        { "name": "Analyze Portfolio", "request": { "method": "GET", "url": "{{baseUrl}}/api/ai/analyze-portfolio/{{userId}}" } },
        { "name": "Task Recommendations", "request": { "method": "GET", "url": "{{baseUrl}}/api/ai/task-recommendations/{{userId}}" } },
        { "name": "Market Alerts", "request": { "method": "GET", "url": "{{baseUrl}}/api/ai/market-alerts/{{userId}}" } },
        { "name": "Explain Recommendation", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "{\n  \"recommendation\": \"Increase emergency fund by $100/mo\"\n}"}, "url": "{{baseUrl}}/api/ai/explain-recommendation" } },
        { "name": "Comprehensive Insights", "request": { "method": "GET", "url": "{{baseUrl}}/api/ai/comprehensive-insights/{{userId}}" } }
      ]
    },
    {
      "name": "AI Intelligence (Wave 7)",
      "item": [
        {
          "name": "Analysis",
          "item": [
            { "name": "Comprehensive Analysis", "request": { "method": "POST", "url": "{{baseUrl}}/api/ai/analyze/{{userId}}?force=false" } },
            { "name": "Cash Optimization", "request": { "method": "POST", "url": "{{baseUrl}}/api/ai/analyze/{{userId}}/cash-optimization" } },
            { "name": "Portfolio Rebalancing", "request": { "method": "POST", "url": "{{baseUrl}}/api/ai/analyze/{{userId}}/rebalancing" } },
            { "name": "TSP Allocation", "request": { "method": "POST", "url": "{{baseUrl}}/api/ai/analyze/{{userId}}/tsp" } },
            { "name": "Risk Alignment", "request": { "method": "POST", "url": "{{baseUrl}}/api/ai/analyze/{{userId}}/risk" } }
          ]
        },
        {
          "name": "Alert to Advice",
          "item": [
            { "name": "Generate from Alert", "request": { "method": "POST", "url": "{{baseUrl}}/api/ai/advice/from-alert/{{alertId}}" } }
          ]
        },
        {
          "name": "Chatbot",
          "item": [
            { "name": "Send Message", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "{\n  \"message\": \"What should I do with my emergency fund?\",\n  \"conversationId\": null\n}"}, "url": "{{baseUrl}}/api/ai/chat" } },
            { "name": "Convert to Advice", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "{\n  \"conversationId\": 1,\n  \"reasoning\": \"User accepted the recommendation\"\n}"}, "url": "{{baseUrl}}/api/ai/chat/convert-to-advice" } },
            { "name": "End Conversation", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "{\n  \"summary\": \"Discussed emergency fund strategy\"\n}"}, "url": "{{baseUrl}}/api/ai/chat/1/end" } },
            { "name": "Get History", "request": { "method": "GET", "url": "{{baseUrl}}/api/ai/chat/history/1?limit=50" } }
          ]
        },
        {
          "name": "Memory Management",
          "item": [
            { "name": "Record Action", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "{\n  \"actionType\": \"AccountOpened\",\n  \"actionSummary\": \"Opened HYSA with $5000\",\n  \"amountMoved\": 5000,\n  \"assetClass\": \"Cash\",\n  \"isSignificant\": true\n}"}, "url": "{{baseUrl}}/api/ai/memory/action" } },
            { "name": "Get Recent Actions", "request": { "method": "GET", "url": "{{baseUrl}}/api/ai/memory/actions?days=30" } },
            { "name": "Get Preferences", "request": { "method": "GET", "url": "{{baseUrl}}/api/ai/memory/preferences?minConfidence=50" } },
            { "name": "Learn Preference", "request": { "method": "POST", "header": [{"key":"Content-Type","value":"application/json"}], "body": {"mode":"raw","raw": "{\n  \"memoryType\": \"RiskTolerance\",\n  \"memoryKey\": \"prefers_conservative_advice\",\n  \"memoryValue\": \"true\",\n  \"source\": \"User explicitly requested conservative options\"\n}"}, "url": "{{baseUrl}}/api/ai/memory/preference" } },
            { "name": "Delete Preference", "request": { "method": "DELETE", "url": "{{baseUrl}}/api/ai/memory/preference/1?reason=User changed risk profile" } }
          ]
        },
        {
          "name": "Market Context",
          "item": [
            { "name": "Get Latest", "request": { "method": "GET", "url": "{{baseUrl}}/api/ai/market-context/latest" } },
            { "name": "Get Summary", "request": { "method": "GET", "url": "{{baseUrl}}/api/ai/market-context/summary?days=30" } }
          ]
        }
      ]
    },
    {
      "name": "Weather",
      "item": [
        { "name": "Weather Forecast", "request": { "method": "GET", "url": "{{baseUrl}}/weatherforecast" } }
      ]
    },
    {
      "name": "External AI Services",
      "item": [
        {
          "name": "OpenAI Health Check",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{openaiApiKey}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"model\": \"gpt-5\",\n  \"messages\": [\n    {\n      \"role\": \"user\",\n      \"content\": \"Say 'API connection successful'\"\n    }\n  ],\n  \"max_completion_tokens\": 100\n}"
            },
            "url": "https://api.openai.com/v1/chat/completions"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has model\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.model).to.exist;",
                  "});",
                  "",
                  "pm.test(\"Response has content\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.choices[0].message.content).to.exist;",
                  "});",
                  "",
                  "pm.test(\"Token usage reported\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.usage.total_tokens).to.be.above(0);",
                  "    console.log('Tokens used:', jsonData.usage.total_tokens);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "OpenAI Models List",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{openaiApiKey}}" }
            ],
            "url": "https://api.openai.com/v1/models"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Has models list\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.be.an('array');",
                  "    console.log('Available models:', jsonData.data.length);",
                  "});",
                  "",
                  "pm.test(\"GPT-5 model exists\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    var gpt5 = jsonData.data.find(m => m.id.includes('gpt-5'));",
                  "    pm.expect(gpt5).to.exist;",
                  "    console.log('Found GPT-5 models:', jsonData.data.filter(m => m.id.includes('gpt-5')).map(m => m.id));",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    }
  ],
  "variable": [
    { "key": "baseUrl", "value": "http://localhost:5052" },
    { "key": "userId", "value": "1" },
    { "key": "adviceId", "value": "1" },
    { "key": "taskId", "value": "1" },
    { "key": "accountId", "value": "1" },
    { "key": "cashAccountId", "value": "00000000-0000-0000-0000-000000000000" },
    { "key": "connectionId", "value": "00000000-0000-0000-0000-000000000000" },
    { "key": "holdingId", "value": "1" },
    { "key": "transactionId", "value": "1" },
    { "key": "alertId", "value": "1" },
    { "key": "goalId", "value": "1" },
    { "key": "incomeSourceId", "value": "1" },
    { "key": "loanId", "value": "1" },
    { "key": "liabilityId", "value": "00000000-0000-0000-0000-000000000000" },
    { "key": "guid", "value": "00000000000000000000000000000000" },
    { "key": "refreshToken", "value": "" },
    { "key": "accessToken", "value": "" },
    { "key": "openaiApiKey", "value": "your-openai-api-key-here" }
  ]
}
